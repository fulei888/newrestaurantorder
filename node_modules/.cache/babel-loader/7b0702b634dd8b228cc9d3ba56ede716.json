{"ast":null,"code":"var _jsxFileName = \"/Users/leifu/Documents/GitHub/restaurantorder/src/Components/Orders/Orders.js\";\nimport React, { useState, useEffect } from 'react';\nimport Order from '../Orders/Order/Order';\nimport axios from '../../axios-orders';\nimport classes from './Orders.module.css';\n\nconst Orders = () => {\n  const [loading, setLoading] = useState(true);\n  const [orders, setOrders] = useState([]);\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = () => {\n    axios.get('/orders.json').then(res => {\n      console.log(res.data);\n      let updateOrder = [];\n\n      for (let key in res.data) {\n        updateOrder.push({ ...res.data[key],\n          key: key\n        });\n      }\n\n      setOrders(updateOrder);\n      setLoading(false);\n    }).catch(err => {\n      setLoading(false);\n    });\n  };\n\n  const deleteHandler = id => {\n    console.log('deleteHandler');\n    axios.delete('/orders/' + id + '.json').then(response => {\n      console.log(response);\n      getData();\n    });\n  };\n\n  const order = /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, orders.map(order => /*#__PURE__*/React.createElement(Order, {\n    dishes: order.dishes,\n    key: order.key,\n    price: order.price,\n    name: order.orderData.name,\n    phone: order.orderData.phone,\n    street: order.orderData.street,\n    city: order.orderData.city,\n    id: order.key,\n    delete: deleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  })));\n\n  if (loading) {\n    order = /*#__PURE__*/React.createElement(Spanner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.Orders,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, order);\n};\n\nexport default Orders;","map":{"version":3,"sources":["/Users/leifu/Documents/GitHub/restaurantorder/src/Components/Orders/Orders.js"],"names":["React","useState","useEffect","Order","axios","classes","Orders","loading","setLoading","orders","setOrders","getData","get","then","res","console","log","data","updateOrder","key","push","catch","err","deleteHandler","id","delete","response","order","map","dishes","price","orderData","name","phone","street","city"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACjB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAC,EAAD,CAApC;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,OAAO;AACV,GAFQ,EAEP,EAFO,CAAT;;AAGA,QAAMA,OAAO,GAAG,MAAM;AAClBP,IAAAA,KAAK,CAACQ,GAAN,CAAU,cAAV,EACCC,IADD,CACMC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,UAAIC,WAAW,GAAG,EAAlB;;AACA,WAAI,IAAIC,GAAR,IAAeL,GAAG,CAACG,IAAnB,EAAyB;AACrBC,QAAAA,WAAW,CAACE,IAAZ,CACI,EACI,GAAGN,GAAG,CAACG,IAAJ,CAASE,GAAT,CADP;AAEIA,UAAAA,GAAG,EAAEA;AAFT,SADJ;AAMH;;AACDT,MAAAA,SAAS,CAACQ,WAAD,CAAT;AACAV,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAdD,EAeCa,KAfD,CAeOC,GAAG,IAAI;AACVd,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAjBD;AAkBH,GAnBD;;AAoBA,QAAMe,aAAa,GAAIC,EAAD,IAAQ;AAC1BT,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAZ,IAAAA,KAAK,CAACqB,MAAN,CAAa,aAAaD,EAAb,GAAgB,OAA7B,EACCX,IADD,CACMa,QAAQ,IAAI;AACdX,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACAf,MAAAA,OAAO;AACV,KAJD;AAKH,GAPD;;AAQA,QAAMgB,KAAK,gBACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKlB,MAAM,CAACmB,GAAP,CAAWD,KAAK,iBACb,oBAAC,KAAD;AACA,IAAA,MAAM,EAAGA,KAAK,CAACE,MADf;AAEA,IAAA,GAAG,EAAIF,KAAK,CAACR,GAFb;AAGA,IAAA,KAAK,EAAEQ,KAAK,CAACG,KAHb;AAIA,IAAA,IAAI,EAAIH,KAAK,CAACI,SAAN,CAAgBC,IAJxB;AAKA,IAAA,KAAK,EAAEL,KAAK,CAACI,SAAN,CAAgBE,KALvB;AAMA,IAAA,MAAM,EAAEN,KAAK,CAACI,SAAN,CAAgBG,MANxB;AAOA,IAAA,IAAI,EAAEP,KAAK,CAACI,SAAN,CAAgBI,IAPtB;AAQA,IAAA,EAAE,EAAIR,KAAK,CAACR,GARZ;AASA,IAAA,MAAM,EAAII,aATV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADL,CADJ;;AAiBA,MAAGhB,OAAH,EAAY;AACRoB,IAAAA,KAAK,gBAAG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AACH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAEtB,OAAO,CAACC,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKqB,KADL,CADJ;AAKH,CA9DD;;AA+DA,eAAerB,MAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Order from '../Orders/Order/Order';\nimport axios from '../../axios-orders';\nimport classes from './Orders.module.css';\n\nconst Orders = () => {\n    const [loading, setLoading] = useState(true);\n    const [orders, setOrders] = useState([]);\n  \n   \n    useEffect(() => {\n        getData()\n    },[]); \n    const getData = () => {\n        axios.get('/orders.json')\n        .then(res => {\n            console.log(res.data);\n            let updateOrder = []\n            for(let key in res.data) {\n                updateOrder.push(\n                    {\n                        ...res.data[key],\n                        key: key\n                    }\n                )\n            }\n            setOrders(updateOrder);\n            setLoading(false)\n        })\n        .catch(err => {\n            setLoading(false)\n        })\n    }\n    const deleteHandler = (id) => {\n        console.log('deleteHandler');\n        axios.delete('/orders/' + id+'.json')\n        .then(response => {\n            console.log(response);\n            getData();\n        })\n    };\n    const order = (\n        <div>\n            {orders.map(order =>\n                <Order \n                dishes ={order.dishes}\n                key = {order.key}\n                price={order.price}\n                name = {order.orderData.name}\n                phone={order.orderData.phone}\n                street={order.orderData.street}\n                city={order.orderData.city}\n                id = {order.key}\n                delete = {deleteHandler}\n                />\n            )}\n        </div>\n    )\n    if(loading) {\n        order = <Spanner />\n    }\n\n    return (\n        <div className={classes.Orders}>\n            {order}\n        </div>\n    )\n}\nexport default Orders;"]},"metadata":{},"sourceType":"module"}