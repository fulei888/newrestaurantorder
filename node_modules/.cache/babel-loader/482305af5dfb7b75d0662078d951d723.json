{"ast":null,"code":"import _objectSpread from\"/Users/leifu/Documents/restaurantorder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/leifu/Documents/restaurantorder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Order from'../Orders/Order/Order';import axios from'../../axios-orders';import classes from'./Orders.module.css';import Spinner from'../UI/Spinner/Spinner';var Orders=function Orders(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];useEffect(function(){getData();},[]);var getData=function getData(){axios.get('/orders.json').then(function(res){console.log(res.data);var updateOrder=[];for(var key in res.data){updateOrder.push(_objectSpread(_objectSpread({},res.data[key]),{},{key:key}));}setOrders(updateOrder);setLoading(false);}).catch(function(err){setLoading(false);});};var deleteHandler=function deleteHandler(id){console.log('deleteHandler');axios.delete('/orders/'+id+'.json').then(function(response){console.log(response);getData();});};var order=/*#__PURE__*/React.createElement(\"div\",null,orders.map(function(order){return/*#__PURE__*/React.createElement(Order,{dishes:order.dishes,key:order.key,price:order.price,name:order.orderData.name,phone:order.orderData.phone,street:order.orderData.street,city:order.orderData.city,id:order.key,delete:deleteHandler});}));if(loading){order=/*#__PURE__*/React.createElement(Spinner,null);}return/*#__PURE__*/React.createElement(\"div\",{className:classes.Orders},order);};export default Orders;","map":{"version":3,"sources":["/Users/leifu/Documents/restaurantorder/src/Components/Orders/Orders.js"],"names":["React","useState","useEffect","Order","axios","classes","Spinner","Orders","loading","setLoading","orders","setOrders","getData","get","then","res","console","log","data","updateOrder","key","push","catch","err","deleteHandler","id","delete","response","order","map","dishes","price","orderData","name","phone","street","city"],"mappings":"yTAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACaN,QAAQ,CAAC,IAAD,CADrB,wCACVO,OADU,eACDC,UADC,8BAEWR,QAAQ,CAAC,EAAD,CAFnB,yCAEVS,MAFU,eAEFC,SAFE,eAKjBT,SAAS,CAAC,UAAM,CACZU,OAAO,GACV,CAFQ,CAEP,EAFO,CAAT,CAGA,GAAMA,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClBR,KAAK,CAACS,GAAN,CAAU,cAAV,EACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EACA,GAAIC,CAAAA,WAAW,CAAG,EAAlB,CACA,IAAI,GAAIC,CAAAA,GAAR,GAAeL,CAAAA,GAAG,CAACG,IAAnB,CAAyB,CACrBC,WAAW,CAACE,IAAZ,gCAEWN,GAAG,CAACG,IAAJ,CAASE,GAAT,CAFX,MAGQA,GAAG,CAAEA,GAHb,IAMH,CACDT,SAAS,CAACQ,WAAD,CAAT,CACAV,UAAU,CAAC,KAAD,CAAV,CACH,CAdD,EAeCa,KAfD,CAeO,SAAAC,GAAG,CAAI,CACVd,UAAU,CAAC,KAAD,CAAV,CACH,CAjBD,EAkBH,CAnBD,CAoBA,GAAMe,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,EAAD,CAAQ,CAC1BT,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAb,KAAK,CAACsB,MAAN,CAAa,WAAaD,EAAb,CAAgB,OAA7B,EACCX,IADD,CACM,SAAAa,QAAQ,CAAI,CACdX,OAAO,CAACC,GAAR,CAAYU,QAAZ,EACAf,OAAO,GACV,CAJD,EAKH,CAPD,CAQA,GAAIgB,CAAAA,KAAK,cACL,+BACKlB,MAAM,CAACmB,GAAP,CAAW,SAAAD,KAAK,qBACb,oBAAC,KAAD,EACA,MAAM,CAAGA,KAAK,CAACE,MADf,CAEA,GAAG,CAAIF,KAAK,CAACR,GAFb,CAGA,KAAK,CAAEQ,KAAK,CAACG,KAHb,CAIA,IAAI,CAAIH,KAAK,CAACI,SAAN,CAAgBC,IAJxB,CAKA,KAAK,CAAEL,KAAK,CAACI,SAAN,CAAgBE,KALvB,CAMA,MAAM,CAAEN,KAAK,CAACI,SAAN,CAAgBG,MANxB,CAOA,IAAI,CAAEP,KAAK,CAACI,SAAN,CAAgBI,IAPtB,CAQA,EAAE,CAAIR,KAAK,CAACR,GARZ,CASA,MAAM,CAAII,aATV,EADa,EAAhB,CADL,CADJ,CAiBA,GAAGhB,OAAH,CAAY,CACRoB,KAAK,cAAG,oBAAC,OAAD,MAAR,CACH,CAED,mBACI,2BAAK,SAAS,CAAEvB,OAAO,CAACE,MAAxB,EACKqB,KADL,CADJ,CAKH,CA9DD,CA+DA,cAAerB,CAAAA,MAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Order from '../Orders/Order/Order';\nimport axios from '../../axios-orders';\nimport classes from './Orders.module.css';\nimport Spinner from '../UI/Spinner/Spinner';\n\nconst Orders = () => {\n    const [loading, setLoading] = useState(true);\n    const [orders, setOrders] = useState([]);\n  \n   \n    useEffect(() => {\n        getData()\n    },[]); \n    const getData = () => {\n        axios.get('/orders.json')\n        .then(res => {\n            console.log(res.data);\n            let updateOrder = []\n            for(let key in res.data) {\n                updateOrder.push(\n                    {\n                        ...res.data[key],\n                        key: key\n                    }\n                )\n            }\n            setOrders(updateOrder);\n            setLoading(false)\n        })\n        .catch(err => {\n            setLoading(false)\n        })\n    }\n    const deleteHandler = (id) => {\n        console.log('deleteHandler');\n        axios.delete('/orders/' + id+'.json')\n        .then(response => {\n            console.log(response);\n            getData();\n        })\n    };\n    let order = (\n        <div>\n            {orders.map(order =>\n                <Order \n                dishes ={order.dishes}\n                key = {order.key}\n                price={order.price}\n                name = {order.orderData.name}\n                phone={order.orderData.phone}\n                street={order.orderData.street}\n                city={order.orderData.city}\n                id = {order.key}\n                delete = {deleteHandler}\n                />\n            )}\n        </div>\n    )\n    if(loading) {\n        order = <Spinner />\n    }\n\n    return (\n        <div className={classes.Orders}>\n            {order}\n        </div>\n    )\n}\nexport default Orders;"]},"metadata":{},"sourceType":"module"}